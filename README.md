# AMD GPU ä½¿ç”¨ç‡ç›£æ§èˆ‡### âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ–¥ï¸ æ•¸æ“šæ”¶é›†èˆ‡ç›£æ§

- **å¤šç¯€é» GPU ç›£æ§** - åŒæ™‚ç›£æ§å¤šå€‹ç¯€é»çš„ AMD GPU ä½¿ç”¨ç‡èˆ‡ VRAM ä½¿ç”¨é‡
- **ğŸ”¥ GPU ä½¿ç”¨è€…è¿½è¹¤** - å³æ™‚é¡¯ç¤ºå“ªäº›ä½¿ç”¨è€…æ­£åœ¨ä½¿ç”¨å“ªäº› GPU (æ–°åŠŸèƒ½ï¼)
- **ç¡¬é«”å°æ‡‰ç³»çµ±** - è‡ªå‹•å»ºç«‹ GPU ç¡¬é«” ID èˆ‡ GPU ç´¢å¼•çš„å°æ‡‰è¡¨
- **ç®¡ç† API æ•´åˆ** - é€é JWT èªè­‰é€£æ¥ç®¡ç†ç³»çµ±ç²å–ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
- **è‡ªå‹•åŒ–æ•¸æ“šæ”¶é›†** - æ”¯æ´å®šæ™‚ä»»å‹™ï¼Œæ¯æ—¥è‡ªå‹•æ”¶é›† GPU èˆ‡ VRAM ä½¿ç”¨ç‡æ•¸æ“š  
- **è©³ç´°çµ±è¨ˆåˆ†æ** - è¨ˆç®—å¹³å‡ä½¿ç”¨ç‡ã€ç”Ÿæˆæ‘˜è¦å ±å‘Š
- **å¤šç¨®æ•¸æ“šæ ¼å¼** - æ”¯### ğŸ”¥ Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨ (`python/daily_gpu_log.py`)

**æ–°å¢åŠŸèƒ½**: åŸºæ–¼åŸ shell è…³æœ¬é–‹ç™¼çš„ Python ç‰ˆæœ¬ï¼Œæä¾›ç›¸åŒåŠŸèƒ½ä½†å…·æœ‰æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œå¯æ“´å±•æ€§ã€‚

**ä¸»è¦å„ªå‹¢:**
- **ğŸ”¥ GPU ä½¿ç”¨è€…è¿½è¹¤** - æ•´åˆç®¡ç† APIï¼Œè‡ªå‹•é¡¯ç¤º GPU ä½¿ç”¨è€…è³‡è¨Š
- **ç¡¬é«”å°æ‡‰ç³»çµ±** - è‡ªå‹•å»ºç«‹ GPU Card ID åˆ° GPU Index å°æ‡‰è¡¨
- **å¢å¼·å ±è¡¨æ ¼å¼** - CSV æª”æ¡ˆåŒ…å«ä½¿ç”¨è€…æ¬„ä½ï¼Œæ‘˜è¦å ±å‘Šé¡¯ç¤ºè©³ç´°ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
- **æ›´å¥½çš„éŒ¯èª¤è™•ç†** - è©³ç´°çš„ç•°å¸¸è³‡è¨Šå’Œç¶²è·¯éŒ¯èª¤æ¢å¾©
- **æ•¸æ“šé©—è­‰** - ä½¿ç”¨ pandas é€²è¡Œå¼·å¤§çš„æ•¸æ“šé©—è­‰å’Œè™•ç†
- **ç‰©ä»¶å°å‘è¨­è¨ˆ** - æ˜“æ–¼ç¶­è­·å’Œæ“´å±•çš„ç¨‹å¼æ¶æ§‹
- **ç©©å®šçš„ç¶²è·¯è«‹æ±‚** - ä½¿ç”¨ requests åº«è™•ç† HTTP è«‹æ±‚

**æ–°å¢ CSV æ ¼å¼:**
```csv
GPUç·¨è™Ÿ,å¹³å‡GPUä½¿ç”¨ç‡(%),å¹³å‡VRAMä½¿ç”¨ç‡(%),ä½¿ç”¨è€…
GPU[0],0.00,0.14,æœªä½¿ç”¨
GPU[1],0.00,0.14,æœªä½¿ç”¨
GPU[3],18.17,82.27,nycubme
```

**ä½¿ç”¨è€…è³‡è¨Šä¾†æº:**
- é€éç®¡ç† API (`http://192.168.10.100/api/v2/consumption/task`) ç²å–
- è‡ªå‹•å°æ‡‰ GPU UUID åˆ°ä½¿ç”¨è€…åç¨±
- å€åˆ†ä½¿ç”¨ä¸­å’Œæœªä½¿ç”¨çš„ GPU åœ–è¡¨å’Œæ–‡å­—æ‘˜è¦![License: WTFPL](https://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-2.png)](http://www.wtfpl.net/)

# AMD GPU ä½¿ç”¨ç‡ç›£æ§èˆ‡è¦–è¦ºåŒ–å·¥å…·

[![License: WTFPL](https://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-2.png)](http://www.wtfpl.net/)

> ğŸš€ **é‡æ§‹å®Œæˆ (2025-09-19)**: Linus é¢¨æ ¼çš„ç¨‹å¼ç¢¼é‡æ§‹å¤§æˆåŠŸï¼
> 
> ğŸ”¥ **é‡æ§‹äº®é»**:
> - **76% ç¨‹å¼ç¢¼æ¸›å°‘** - 500è¡Œ Shell è…³æœ¬ç¸®æ¸›ç‚º 120è¡Œç°¡æ½”åŒ…è£å™¨
> - **æ¨¡çµ„åŒ– src/ æ¶æ§‹** - python/, visualization/ æ–‡ä»¶å¤¾æ•´åˆåˆ°çµ±ä¸€çš„ src/ çµæ§‹
> - **é«˜ç´šè¦–è¦ºåŒ–å·¥å…·** - æ–°çš„ `src/tools/advanced_visualizer.py` æ›¿ä»£è¤‡é›œè…³æœ¬
> - **å‘å¾Œç›¸å®¹æ€§** - æ‰€æœ‰èˆŠå‘½ä»¤æ ¼å¼ä»ç„¶æœ‰æ•ˆï¼Œè‡ªå‹•è½‰æ›
> - **Linus å¥½å“å‘³** - æ¶ˆé™¤ç‰¹æ®Šæƒ…æ³ï¼Œç°¡åŒ–è³‡æ–™çµæ§‹ï¼Œç„¡æ¢ä»¶åˆ†æ”¯
> 
> ğŸ“– **è©³ç´°å ±å‘Š**: [Shellè…³æœ¬é‡æ§‹å®Œæˆå ±å‘Š](SHELL_SCRIPT_REFACTORING_COMPLETE.md)

---

> ğŸ‰ **é‡å¤§æ›´æ–° (2025-08-01)**: GPU ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±æ­£å¼ä¸Šç·šï¼
> 
> âœ¨ **æ–°åŠŸèƒ½äº®é»**:
> - ğŸ”¥ **GPU ä½¿ç”¨è€…è¿½è¹¤** - å³æ™‚é¡¯ç¤ºå“ªäº›ä½¿ç”¨è€…æ­£åœ¨ä½¿ç”¨å“ªäº› GPU
> - ğŸ—ƒï¸ **ç¡¬é«”å°æ‡‰è¡¨** - è‡ªå‹•å»ºç«‹ GPU Card ID åˆ° GPU Index å°æ‡‰é—œä¿‚
> - ğŸ“Š **ä½¿ç”¨è€…æ¬„ä½å ±è¡¨** - CSV æª”æ¡ˆå’Œæ‘˜è¦å ±å‘ŠåŒ…å«è©³ç´°ä½¿ç”¨è€…è³‡è¨Š
> - ğŸ”— **ç®¡ç† API æ•´åˆ** - é€é JWT èªè­‰ç²å–ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
> - ğŸ—ï¸ **ç‰©ä»¶å°å‘è¨­è¨ˆ** - æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•
> 
> ğŸ‘‰ [ç«‹å³é«”é©—ä½¿ç”¨è€…è¿½è¹¤åŠŸèƒ½](#ğŸ”¥-gpu-ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±æ–°åŠŸèƒ½) | [æŸ¥çœ‹å®Œæ•´åŠŸèƒ½èªªæ˜](#ğŸ”¥-python-ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨æ–°åŠŸèƒ½)

å®Œæ•´çš„ AMD GPU ä½¿ç”¨ç‡ç›£æ§èˆ‡è¦–è¦ºåŒ–è§£æ±ºæ–¹æ¡ˆï¼Œæ”¯æ´å¤šç¯€é»ç’°å¢ƒçš„ GPU ç›£æ§ã€æ•¸æ“šæ”¶é›†ã€åˆ†æå’Œè¦–è¦ºåŒ–ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ï¿½ æ•¸æ“šæ”¶é›†èˆ‡ç›£æ§

- **å¤šç¯€é» GPU ç›£æ§** - åŒæ™‚ç›£æ§å¤šå€‹ç¯€é»çš„ AMD GPU ä½¿ç”¨ç‡èˆ‡ VRAM ä½¿ç”¨é‡
- **è‡ªå‹•åŒ–æ•¸æ“šæ”¶é›†** - æ”¯æ´å®šæ™‚ä»»å‹™ï¼Œæ¯æ—¥è‡ªå‹•æ”¶é›† GPU èˆ‡ VRAM ä½¿ç”¨ç‡æ•¸æ“š  
- **è©³ç´°çµ±è¨ˆåˆ†æ** - è¨ˆç®—å¹³å‡ä½¿ç”¨ç‡ã€ç”Ÿæˆæ‘˜è¦å ±å‘Š
- **å¤šç¨®æ•¸æ“šæ ¼å¼** - æ”¯æ´ CSVã€SVG åœ–è¡¨å’Œæ–‡å­—æ‘˜è¦

### ğŸ“Š è¦–è¦ºåŒ–èˆ‡åˆ†æ

- **å¤šç¨®åœ–è¡¨é¡å‹** - ç¯€é»å°æ¯”ã€GPUè¶¨å‹¢ã€VRAMåˆ†æã€ç†±åŠ›åœ–ã€æ™‚é–“åºåˆ—åˆ†æ
- **ä¸­æ–‡å­—é«”æ”¯æ´** - è‡ªå‹•é…ç½®ä¸­æ–‡å­—é«”ï¼Œå®Œç¾é¡¯ç¤ºä¸­æ–‡æ¨™ç±¤
- **è·¨å¹³å°ç›¸å®¹** - æ”¯æ´ Linuxã€Windowsã€macOS
- **ä¸€éµå¼æ“ä½œ** - æä¾›ä¾¿æ·çš„åŸ·è¡Œè…³æœ¬

### ğŸ› ï¸ å·¥å…·èˆ‡è…³æœ¬

- **ğŸ”¥ Python æ•¸æ“šæ”¶é›†å™¨** - æ–°å¢ï¼åŠŸèƒ½å®Œæ•´çš„ Python ç‰ˆæœ¬ï¼Œæä¾›æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œæ“´å±•æ€§
- **Shell æ•¸æ“šæ”¶é›†è…³æœ¬** - åŸå§‹ç©©å®šçš„ Bash ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å·¥å…·
- **æ—¥æœŸå€é–“åˆ†æ** - éˆæ´»çš„æ™‚é–“ç¯„åœåˆ†æåŠŸèƒ½
- **ç¯€é»å°æ¯”åˆ†æ** - å¤šç¯€é»æ•ˆèƒ½æ¯”è¼ƒå·¥å…·
- **å ±å‘Šç”Ÿæˆ** - è‡ªå‹•ç”Ÿæˆå„ç¨®æ ¼å¼çš„åˆ†æå ±å‘Š

### ğŸ†• æ–°å¢åŠŸèƒ½äº®é»

- **ğŸ”¥ GPU ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±** - æ•´åˆç®¡ç† APIï¼Œå³æ™‚é¡¯ç¤º GPU ä½¿ç”¨è€…è³‡è¨Š
- **ç¡¬é«”å°æ‡‰è¡¨** - è‡ªå‹•å»ºç«‹ GPU Card ID åˆ° GPU Index çš„å°æ‡‰é—œä¿‚
- **ä½¿ç”¨è€…æ¬„ä½å ±è¡¨** - CSV æª”æ¡ˆå’Œæ‘˜è¦å ±å‘Šç¾åœ¨åŒ…å«ä½¿ç”¨è€…è³‡è¨Š
- **é›™ç‰ˆæœ¬æ”¯æ´** - Shell ç‰ˆæœ¬ï¼ˆç©©å®šå¯é ï¼‰+ Python ç‰ˆæœ¬ï¼ˆé€²éšåŠŸèƒ½ï¼‰
- **æ™ºæ…§éŒ¯èª¤è™•ç†** - Python ç‰ˆæœ¬æä¾›è©³ç´°çš„éŒ¯èª¤è¨ºæ–·å’Œè‡ªå‹•æ¢å¾©
- **æ•¸æ“šé©—è­‰** - ä½¿ç”¨ pandas é€²è¡Œå¼·å¤§çš„æ•¸æ“šå®Œæ•´æ€§æª¢æŸ¥
- **æ¨¡çµ„åŒ–è¨­è¨ˆ** - ç‰©ä»¶å°å‘æ¶æ§‹ï¼Œæ˜“æ–¼ç¶­è­·å’ŒåŠŸèƒ½æ“´å±•

## ï¿½ GPU ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰

### ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æ–°çš„ GPU ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±èƒ½å¤ ï¼š
- **å³æ™‚é¡¯ç¤º GPU ä½¿ç”¨è€…** - è‡ªå‹•è­˜åˆ¥å“ªäº›ä½¿ç”¨è€…æ­£åœ¨ä½¿ç”¨å“ªäº› GPU
- **ç¡¬é«”å°æ‡‰è¡¨** - å»ºç«‹ GPU Card ID åˆ° GPU Index çš„æ¸…æ™°å°æ‡‰é—œä¿‚
- **è©³ç´°ä»»å‹™è³‡è¨Š** - é¡¯ç¤ºä½¿ç”¨è€…çš„ä»»å‹™é¡å‹ã€åŸ·è¡Œæ™‚é–“ã€å°ˆæ¡ˆè³‡è¨Šç­‰
- **å¢å¼·å ±è¡¨æ ¼å¼** - CSV æª”æ¡ˆå’Œæ‘˜è¦å ±å‘ŠåŒ…å«å®Œæ•´ä½¿ç”¨è€…è³‡è¨Š

### ğŸ¯ ä½¿ç”¨ç¯„ä¾‹

**æŸ¥çœ‹å³æ™‚ GPU ä½¿ç”¨è€…ç‹€æ…‹:**
```bash
# æ”¶é›†ä»Šæ—¥æ•¸æ“šï¼ˆåŒ…å«ä½¿ç”¨è€…è³‡è¨Šï¼‰
./python/run_daily_gpu_log.sh

# æŸ¥çœ‹ CSV å ±è¡¨ä¸­çš„ä½¿ç”¨è€…æ¬„ä½
head -10 data/colab-gpu4/$(date +%Y-%m-%d)/average_$(date +%Y-%m-%d).csv
```

**ç¯„ä¾‹è¼¸å‡º:**
```csv
GPUç·¨è™Ÿ,å¹³å‡GPUä½¿ç”¨ç‡(%),å¹³å‡VRAMä½¿ç”¨ç‡(%),ä½¿ç”¨è€…
GPU[0],0.00,0.14,æœªä½¿ç”¨
GPU[1],0.00,0.14,æœªä½¿ç”¨
GPU[2],20.28,83.38,æœªä½¿ç”¨
GPU[3],18.17,82.27,nycubme
GPU[4],0.00,0.14,æœªä½¿ç”¨
GPU[5],0.00,0.14,æœªä½¿ç”¨
GPU[6],0.00,0.14,æœªä½¿ç”¨
GPU[7],0.00,0.14,æœªä½¿ç”¨
å…¨éƒ¨å¹³å‡,4.81,20.81,æ‰€æœ‰ä½¿ç”¨è€…
```

**è©³ç´°ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š:**
```bash
# æŸ¥çœ‹è©³ç´°æ‘˜è¦å ±å‘Š
cat data/colab-gpu4/$(date +%Y-%m-%d)/summary_$(date +%Y-%m-%d).txt
```

**ç¯„ä¾‹æ‘˜è¦è¼¸å‡º:**
```
GPU ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š:
--------------------------------------------------
colab-gpu4 GPU ä»»å‹™è³‡è¨Š:
  GPU 25: nycubme
    - GPU å‹è™Ÿ: AMD Instinct MI300X
    - GPU è¨˜æ†¶é«”: 196592 MB
    - ä»»å‹™é¡å‹: LAB
    - å°ˆæ¡ˆ UUID: pd6ce655
    - æ˜ åƒæª”: myelintek/labu1f682d9:1750235191
    - é–‹å§‹æ™‚é–“: Mon, 14 Jul 2025 14:22:00 GMT
    - ç‹€æ…‹: åŸ·è¡Œä¸­
    - ä½¿ç”¨æ™‚é•·: 86399.0 ç§’
    - GPU UUID: APU-70cb99ce3e214bda
```

### ğŸ› ï¸ æŠ€è¡“å¯¦ç¾

**API ç«¯é»**: `http://192.168.10.100/api/v2/consumption/task`
**èªè­‰æ–¹å¼**: JWT Bearer Token  
**æ•¸æ“šæµç¨‹**:
1. å¾ç®¡ç† API ç²å– GPU ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
2. è§£æ GPU UUID èˆ‡ä½¿ç”¨è€…åç¨±çš„å°æ‡‰é—œä¿‚
3. çµåˆ GPU ç¡¬é«”å°æ‡‰è¡¨ï¼Œå°‡ Card ID æ˜ å°„åˆ° GPU Index
4. åœ¨ CSV å ±è¡¨å’Œæ‘˜è¦å ±å‘Šä¸­é¡¯ç¤ºä½¿ç”¨è€…è³‡è¨Š

### ğŸ å¿«é€Ÿé«”é©—

```bash
# æ¸¬è©¦ä½¿ç”¨è€…æ¬„ä½åŠŸèƒ½
python3 test_user_column.py

# ç«‹å³é–‹å§‹ä½¿ç”¨
./python/run_daily_gpu_log.sh
```

> ğŸ†• **æœ€æ–°æ›´æ–°**: å…¨æ–° Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨å·²ä¸Šç·šï¼æä¾›æ›´å¼·å¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„ä½¿ç”¨é«”é©—ã€‚

### ğŸ”¥ Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰

**ä¸€éµæ¸¬è©¦ç’°å¢ƒ**ï¼š
```bash
# æª¢æŸ¥ç’°å¢ƒä¸¦æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½
python3 python/test_gpu_collector.py
```

**ç«‹å³é–‹å§‹ä½¿ç”¨**ï¼š
```bash
# æ”¶é›†ä»Šå¤©çš„ GPU æ•¸æ“šï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰
./python/run_daily_gpu_log.sh

# æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
./python/run_daily_gpu_log.sh 2025-08-01

# é¡¯ç¤ºè©³ç´°èªªæ˜
./python/run_daily_gpu_log.sh --help
```

**ç‚ºä»€éº¼é¸æ“‡ Python ç‰ˆæœ¬ï¼Ÿ**
- âœ… **æ›´æ™ºæ…§çš„éŒ¯èª¤è™•ç†** - è©³ç´°çš„éŒ¯èª¤è¨ºæ–·å’Œè‡ªå‹•æ¢å¾©
- âœ… **æ•¸æ“šå®Œæ•´æ€§ä¿è­‰** - ä½¿ç”¨ pandas é€²è¡Œå¼·å¤§çš„æ•¸æ“šé©—è­‰
- âœ… **ç‰©ä»¶å°å‘è¨­è¨ˆ** - æ˜“æ–¼ç¶­è­·å’ŒåŠŸèƒ½æ“´å±•
- âœ… **å®Œå…¨ç›¸å®¹** - èˆ‡åŸ Shell ç‰ˆæœ¬è¼¸å‡ºæ ¼å¼100%ç›¸å®¹

### è¦–è¦ºåŒ–å·¥å…·

```bash
# è‡ªå‹•åµæ¸¬æ•¸æ“šä¸¦ç”Ÿæˆæ‰€æœ‰åœ–è¡¨
./run_gpu_visualization.sh auto

# å¿«é€Ÿç”ŸæˆæŒ‡å®šæ—¥æœŸç¯„åœçš„åœ–è¡¨  
./run_gpu_visualization.sh quick 2025-05-23 2025-05-26

# ç”Ÿæˆç¯€é»å°æ¯”åœ–
./run_gpu_visualization.sh nodes 2025-05-23 2025-05-26

# åŸ·è¡Œæ‰€æœ‰ç¯„ä¾‹
./run_gpu_visualization.sh examples
```

### å‚³çµ± Shell ç‰ˆæœ¬ï¼ˆå‚™ç”¨ï¼‰

```bash
# Python ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰- æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œæ“´å±•æ€§
./python/run_daily_gpu_log.sh              # æ”¶é›†ä»Šå¤©çš„æ•¸æ“š
./python/run_daily_gpu_log.sh 2025-08-01   # æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š

# åŸå§‹ Shell ç‰ˆæœ¬ï¼ˆç©©å®šå¯é ï¼‰
./scripts/daily_gpu_log.sh                 # æ”¶é›†ä»Šå¤©çš„æ•¸æ“š
./scripts/daily_gpu_log.sh 2025-08-01      # æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
```

#### å…¶ä»–åˆ†æå·¥å…·

```bash
# åˆ†ææ—¥æœŸå€é–“çš„ä½¿ç”¨ç‡
./scripts/calculate_gpu_range.sh 2025-05-01 2025-05-15

# åˆ†æç¯€é»ä½¿ç”¨ç‡ï¼ˆæ”¯æ´ GPU å’Œ VRAMï¼‰
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15

# åˆ†æç‰¹å®šç¯€é»
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15 colab-gpu1
```

## ï¿½ å¿«é€Ÿé–‹å§‹

> ğŸ†• **æœ€æ–°æ›´æ–°**: å…¨æ–° GPU ä½¿ç”¨è€…è¿½è¹¤ç³»çµ±å·²ä¸Šç·šï¼ç«‹å³æŸ¥çœ‹å“ªäº›ä½¿ç”¨è€…æ­£åœ¨ä½¿ç”¨å“ªäº› GPUã€‚

### ğŸ”¥ Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰

**ğŸ¯ å¿«é€Ÿé«”é©—ä½¿ç”¨è€…è¿½è¹¤åŠŸèƒ½**ï¼š
```bash
# æ¸¬è©¦ä½¿ç”¨è€…æ¬„ä½åŠŸèƒ½
python3 test_user_column.py

# æ”¶é›†åŒ…å«ä½¿ç”¨è€…è³‡è¨Šçš„æ•¸æ“š
./python/run_daily_gpu_log.sh

# æŸ¥çœ‹ä½¿ç”¨è€…è³‡è¨Šï¼ˆCSV æ ¼å¼ï¼‰
head -10 data/colab-gpu4/$(date +%Y-%m-%d)/average_$(date +%Y-%m-%d).csv

# æŸ¥çœ‹è©³ç´°ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
cat data/colab-gpu4/$(date +%Y-%m-%d)/summary_$(date +%Y-%m-%d).txt
```

**ä¸€éµæ¸¬è©¦ç’°å¢ƒ**ï¼š
```bash
# æª¢æŸ¥ç’°å¢ƒä¸¦æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½
python3 python/test_gpu_collector.py
```

**ç«‹å³é–‹å§‹ä½¿ç”¨**ï¼š
```bash
# æ”¶é›†ä»Šå¤©çš„ GPU æ•¸æ“šï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰
./python/run_daily_gpu_log.sh

# æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
./python/run_daily_gpu_log.sh 2025-08-01

# é¡¯ç¤ºè©³ç´°èªªæ˜
./python/run_daily_gpu_log.sh --help
```

**ç‚ºä»€éº¼é¸æ“‡ Python ç‰ˆæœ¬ï¼Ÿ**
- âœ… **ğŸ”¥ GPU ä½¿ç”¨è€…è¿½è¹¤** - å³æ™‚é¡¯ç¤º GPU ä½¿ç”¨è€…è³‡è¨Š
- âœ… **ç¡¬é«”å°æ‡‰è¡¨** - è‡ªå‹•å»ºç«‹ Card ID åˆ° GPU Index å°æ‡‰
- âœ… **ä½¿ç”¨è€…æ¬„ä½å ±è¡¨** - CSV å’Œæ‘˜è¦åŒ…å«å®Œæ•´ä½¿ç”¨è€…è³‡è¨Š
- âœ… **æ›´æ™ºæ…§çš„éŒ¯èª¤è™•ç†** - è©³ç´°çš„éŒ¯èª¤è¨ºæ–·å’Œè‡ªå‹•æ¢å¾©
- âœ… **æ•¸æ“šå®Œæ•´æ€§ä¿è­‰** - ä½¿ç”¨ pandas é€²è¡Œå¼·å¤§çš„æ•¸æ“šé©—è­‰
- âœ… **ç‰©ä»¶å°å‘è¨­è¨ˆ** - æ˜“æ–¼ç¶­è­·å’ŒåŠŸèƒ½æ“´å±•
- âœ… **å®Œå…¨ç›¸å®¹** - èˆ‡åŸ Shell ç‰ˆæœ¬è¼¸å‡ºæ ¼å¼100%ç›¸å®¹

### è¦–è¦ºåŒ–å·¥å…·

```bash
# è‡ªå‹•åµæ¸¬æ•¸æ“šä¸¦ç”Ÿæˆæ‰€æœ‰åœ–è¡¨
./run_gpu_visualization.sh auto

# å¿«é€Ÿç”ŸæˆæŒ‡å®šæ—¥æœŸç¯„åœçš„åœ–è¡¨  
./run_gpu_visualization.sh quick 2025-05-23 2025-05-26

# ç”Ÿæˆç¯€é»å°æ¯”åœ–
./run_gpu_visualization.sh nodes 2025-05-23 2025-05-26

# åŸ·è¡Œæ‰€æœ‰ç¯„ä¾‹
./run_gpu_visualization.sh examples
```

### å‚³çµ± Shell ç‰ˆæœ¬ï¼ˆå‚™ç”¨ï¼‰

```bash
# Python ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰- æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œæ“´å±•æ€§
./python/run_daily_gpu_log.sh              # æ”¶é›†ä»Šå¤©çš„æ•¸æ“š
./python/run_daily_gpu_log.sh 2025-08-01   # æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š

# åŸå§‹ Shell ç‰ˆæœ¬ï¼ˆç©©å®šå¯é ï¼‰
./scripts/daily_gpu_log.sh                 # æ”¶é›†ä»Šå¤©çš„æ•¸æ“š
./scripts/daily_gpu_log.sh 2025-08-01      # æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
```

#### å…¶ä»–åˆ†æå·¥å…·

```bash
# åˆ†ææ—¥æœŸå€é–“çš„ä½¿ç”¨ç‡
./scripts/calculate_gpu_range.sh 2025-05-01 2025-05-15

# åˆ†æç¯€é»ä½¿ç”¨ç‡ï¼ˆæ”¯æ´ GPU å’Œ VRAMï¼‰
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15

# åˆ†æç‰¹å®šç¯€é»
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15 colab-gpu1
```

## ï¿½ğŸ“ å°ˆæ¡ˆçµæ§‹

```text
data_collection/
â”œâ”€â”€ README.md                           # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â”œâ”€â”€ GPU_TREND_VISUALIZATION_GUIDE.md   # GPU è¶¨å‹¢è¦–è¦ºåŒ–æŒ‡å—
â”œâ”€â”€ VISUALIZATION_QUICK_START.md       # è¦–è¦ºåŒ–å¿«é€Ÿå…¥é–€
â”œâ”€â”€ VRAM_FEATURES.md                   # VRAM åŠŸèƒ½èªªæ˜
â”œâ”€â”€ LICENSE                            # é–‹æºæˆæ¬Š
â”œâ”€â”€ run_gpu_visualization.sh           # ä¸»è¦è¦–è¦ºåŒ–åŸ·è¡Œè…³æœ¬
â”œâ”€â”€ requirements.txt                   # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ .gitignore                         # Git å¿½ç•¥è¦å‰‡
â”œâ”€â”€ plots/                             # ç”Ÿæˆçš„åœ–è¡¨è¼¸å‡ºç›®éŒ„
â”‚   â”œâ”€â”€ *.png                         # å„ç¨®è¦–è¦ºåŒ–åœ–è¡¨
â”‚   â””â”€â”€ font_test*.png                # å­—é«”æ¸¬è©¦åœ–è¡¨
â”œâ”€â”€ data/                              # GPU ç›£æ§æ•¸æ“šç›®éŒ„ (git å¿½ç•¥)
â”‚   â”œâ”€â”€ colab-gpu1/                   # å„ç¯€é»æ•¸æ“š
â”‚   â”‚   â”œâ”€â”€ 2025-05-23/              # ä¾æ—¥æœŸå­˜æ”¾
â”‚   â”‚   â”‚   â”œâ”€â”€ average_*.csv        # å¹³å‡ä½¿ç”¨ç‡
â”‚   â”‚   â”‚   â”œâ”€â”€ gpu*_*.csv          # å„ GPU æ•¸æ“š (å« GPU èˆ‡ VRAM ä½¿ç”¨ç‡)
â”‚   â”‚   â”‚   â”œâ”€â”€ gpu*_*.svg          # GPU åœ–è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ summary_*.txt       # æ‘˜è¦å ±å‘Š
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ colab-gpu2/                   # å…¶ä»–ç¯€é»æ•¸æ“š
â”‚   â”œâ”€â”€ colab-gpu3/
â”‚   â”œâ”€â”€ colab-gpu4/
â”‚   â””â”€â”€ reports/                      # ç¶œåˆåˆ†æå ±å‘Š
â”œâ”€â”€ scripts/                          # æ•¸æ“šæ”¶é›†èˆ‡åˆ†æè…³æœ¬
â”‚   â”œâ”€â”€ daily_gpu_log.sh             # ä¸»è¦æ•¸æ“šæ”¶é›†è…³æœ¬ (Shell ç‰ˆæœ¬)
â”‚   â”œâ”€â”€ calculate_gpu_range.sh       # GPU æ—¥æœŸå€é–“åˆ†æ
â”‚   â””â”€â”€ calculate_node_gpu_usage.sh  # ç¯€é»ä½¿ç”¨ç‡åˆ†æ
â”œâ”€â”€ python/                           # ğŸ”¥ Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨
â”‚   â”œâ”€â”€ daily_gpu_log.py             # Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†è…³æœ¬
â”‚   â”œâ”€â”€ run_daily_gpu_log.sh         # Python ç‰ˆæœ¬åŸ·è¡Œè…³æœ¬
â”‚   â”œâ”€â”€ test_gpu_collector.py        # æ¸¬è©¦è…³æœ¬
â”‚   â”œâ”€â”€ requirements.txt             # Python ä¾è³´å¥—ä»¶
â”‚   â”œâ”€â”€ README.md                    # Python ç‰ˆæœ¬èªªæ˜
â”‚   â””â”€â”€ COMPARISON.md                # Shell vs Python æ¯”è¼ƒ
â”œâ”€â”€ examples/                         # ç¯„ä¾‹æª”æ¡ˆ
â”‚   â””â”€â”€ gpu_visualization_examples.py # GPU è¦–è¦ºåŒ–ç¯„ä¾‹
â””â”€â”€ visualization/                    # Python è¦–è¦ºåŒ–å·¥å…·é›†
    â”œâ”€â”€ README.md                    # è¦–è¦ºåŒ–å·¥å…·èªªæ˜
    â”œâ”€â”€ GPU_TREND_VISUALIZATION_GUIDE.md # è©³ç´°ä½¿ç”¨æŒ‡å—
    â”œâ”€â”€ requirements.txt             # è¦–è¦ºåŒ–ä¾è³´å¥—ä»¶
    â”œâ”€â”€ run_viz.sh                   # è¦–è¦ºåŒ–åŸ·è¡Œè…³æœ¬
    â”œâ”€â”€ font_config.py               # ä¸­æ–‡å­—é«”é…ç½®æ¨¡çµ„
    â”œâ”€â”€ test_fonts.py                # å­—é«”æ¸¬è©¦å·¥å…·
    â”œâ”€â”€ vram_monitor.py              # VRAM ç›£æ§å·¥å…·
    â”œâ”€â”€ advanced_gpu_trend_analyzer.py # é€²éšè¶¨å‹¢åˆ†æå™¨
    â”œâ”€â”€ quick_gpu_trend_plots.py     # å¿«é€Ÿè¶¨å‹¢ç¹ªåœ–
    â”œâ”€â”€ gpu_trend_visualizer.py      # GPU è¶¨å‹¢è¦–è¦ºåŒ–å™¨
    â””â”€â”€ gpu_trend_examples.py        # ä½¿ç”¨ç¯„ä¾‹èˆ‡æ•™å­¸
```

## ğŸ–¥ï¸ ç¯€é»é…ç½®

ç›®å‰é…ç½®ç›£æ§ä»¥ä¸‹ç¯€é»ï¼š

- **colab-gpu1**: 192.168.10.103
- **colab-gpu2**: 192.168.10.104  
- **colab-gpu3**: 192.168.10.105
- **colab-gpu4**: 192.168.10.106

æ¯å€‹ç¯€é»ç›£æ§ 8 å€‹ GPU ID: `1, 9, 17, 25, 33, 41, 49, 57`

### ğŸ”¥ GPU ç¡¬é«”å°æ‡‰è¡¨

ç³»çµ±è‡ªå‹•å»ºç«‹ä»¥ä¸‹å°æ‡‰é—œä¿‚ï¼š

| GPU Index | Card ID | èªªæ˜ |
|-----------|---------|------|
| GPU[0] | Card 1 | ç¬¬ä¸€å¼µ GPU |
| GPU[1] | Card 9 | ç¬¬äºŒå¼µ GPU |
| GPU[2] | Card 17 | ç¬¬ä¸‰å¼µ GPU |
| GPU[3] | Card 25 | ç¬¬å››å¼µ GPU |
| GPU[4] | Card 33 | ç¬¬äº”å¼µ GPU |
| GPU[5] | Card 41 | ç¬¬å…­å¼µ GPU |
| GPU[6] | Card 49 | ç¬¬ä¸ƒå¼µ GPU |
| GPU[7] | Card 57 | ç¬¬å…«å¼µ GPU |

### ğŸ”— ç®¡ç† API æ•´åˆ

- **ç®¡ç†ç³»çµ±ç«¯é»**: `http://192.168.10.100/api/v2/consumption/task`
- **èªè­‰æ–¹å¼**: JWT Bearer Token
- **åŠŸèƒ½**: ç²å– GPU ä½¿ç”¨è€…ä»»å‹™è³‡è¨Šï¼ŒåŒ…å«ä½¿ç”¨è€…åç¨±ã€ä»»å‹™é¡å‹ã€GPU UUID ç­‰

## ğŸ“Š è¦–è¦ºåŒ–åŠŸèƒ½è©³è¿°

### å¯ç”¨çš„åœ–è¡¨é¡å‹

#### ğŸ”¥ GPU ä½¿ç”¨ç‡ç›£æ§

1. **ç¯€é»å°æ¯”è¶¨å‹¢åœ–** - æ¯”è¼ƒå„ç¯€é»çš„å¹³å‡ GPU ä½¿ç”¨ç‡
2. **å–®ä¸€ç¯€é»æ‰€æœ‰ GPU è¶¨å‹¢åœ–** - æŸ¥çœ‹ç‰¹å®šç¯€é»å…§æ‰€æœ‰ GPU çš„ä½¿ç”¨ç‡è¶¨å‹¢
3. **ç‰¹å®š GPU è·¨ç¯€é»å°æ¯”åœ–** - æ¯”è¼ƒç›¸åŒ GPU ID åœ¨ä¸åŒç¯€é»ä¸Šçš„ä½¿ç”¨ç‡
4. **ğŸ”¥ å„ç¯€é» GPU ä½¿ç”¨ç‡å †ç–Šå€åŸŸåœ–** - æŒ‰ç¯€é»åˆ†å±¤é¡¯ç¤ºä½¿ç”¨ç‡ç´¯ç©æƒ…æ³ï¼Œæ¸…æ¥šå±•ç¤ºå„ç¯€é»çš„è²¢ç»ï¼ˆæ–°åŠŸèƒ½ï¼‰
5. **ç†±åŠ›åœ–** - ä»¥ç†±åŠ›åœ–å½¢å¼é¡¯ç¤ºæ‰€æœ‰ GPU çš„ä½¿ç”¨ç‡åˆ†ä½ˆ
6. **è©³ç´°æ™‚é–“åºåˆ—åœ–** - é¡¯ç¤ºç‰¹å®š GPU åœ¨ç‰¹å®šæ—¥æœŸçš„è©³ç´°ä½¿ç”¨ç‡è®ŠåŒ–
7. **ç¶œåˆå„€è¡¨æ¿** - åŒ…å«å¤šç¨®è¦–åœ–çš„ç¶œåˆåˆ†æé é¢

#### ğŸ”¥ VRAM ä½¿ç”¨é‡ç›£æ§

1. **VRAM ç¯€é»å°æ¯”åœ–** - æ¯”è¼ƒå„ç¯€é»çš„ VRAM ä½¿ç”¨é‡è¶¨å‹¢
2. **ğŸ”¥ å„ç¯€é» VRAM ä½¿ç”¨ç‡å †ç–Šå€åŸŸåœ–** - é¡¯ç¤ºå„ç¯€é» VRAM ä½¿ç”¨ç‡ç´¯ç©æƒ…æ³ï¼ŒåŒ…å«ä½¿ç”¨è€…æ¨™ç±¤è³‡è¨Šï¼ˆæ–°åŠŸèƒ½ï¼‰
3. **VRAM ä½¿ç”¨ç‡ç†±åŠ›åœ–** - ä»¥ç†±åŠ›åœ–é¡¯ç¤ºæ‰€æœ‰ GPU çš„ VRAM ä½¿ç”¨åˆ†ä½ˆ
4. **VRAM æ™‚é–“åºåˆ—åœ–** - é¡¯ç¤ºç‰¹å®š GPU çš„ VRAM ä½¿ç”¨é‡è®ŠåŒ–æ›²ç·š
5. **VRAM ç¶œåˆåˆ†æ** - ä¸€æ¬¡ç”Ÿæˆæ‰€æœ‰ VRAM ç›¸é—œåœ–è¡¨

### ä¸»è¦åŸ·è¡Œè…³æœ¬å‘½ä»¤

#### GPU ä½¿ç”¨ç‡åœ–è¡¨

```bash
# è‡ªå‹•æ¨¡å¼ - åµæ¸¬æ•¸æ“šä¸¦ç”Ÿæˆæ‰€æœ‰åœ–è¡¨
./run_gpu_visualization.sh auto

# å¿«é€Ÿæ¨¡å¼ - ç”Ÿæˆå¸¸ç”¨åœ–è¡¨
./run_gpu_visualization.sh quick [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# ç¯€é»å°æ¯”åœ–
./run_gpu_visualization.sh nodes [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# å–®ä¸€ç¯€é»æ‰€æœ‰ GPU åœ–
./run_gpu_visualization.sh node [ç¯€é»åç¨±] [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# ç‰¹å®š GPU è·¨ç¯€é»å°æ¯”åœ–
./run_gpu_visualization.sh gpu [GPU_ID] [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# ğŸ”¥ å„ç¯€é» GPU ä½¿ç”¨ç‡å †ç–Šå€åŸŸåœ–ï¼ˆæ–°åŠŸèƒ½ï¼‰
./run_gpu_visualization.sh stacked [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# ç†±åŠ›åœ–
./run_gpu_visualization.sh heatmap [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# è©³ç´°æ™‚é–“åºåˆ—åœ–
./run_gpu_visualization.sh timeline [ç¯€é»] [GPU_ID] [æ—¥æœŸ]
```

#### ğŸ”¥ VRAM ä½¿ç”¨é‡åœ–è¡¨

```bash
# ğŸ”¥ å„ç¯€é» VRAM ä½¿ç”¨ç‡å †ç–Šå€åŸŸåœ–ï¼ˆæ–°åŠŸèƒ½ï¼‰
./run_gpu_visualization.sh vram-stacked [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# VRAM å„ç¯€é»å°æ¯”åœ–
./run_gpu_visualization.sh vram-nodes [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ] [GPU_ID]

# VRAM ä½¿ç”¨ç‡ç†±åŠ›åœ–
./run_gpu_visualization.sh vram-heatmap [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]

# VRAM æ™‚é–“åºåˆ—åœ–
./run_gpu_visualization.sh vram-timeline [ç¯€é»] [GPU_ID] [æ—¥æœŸ]

# ç”Ÿæˆæ‰€æœ‰ VRAM åœ–è¡¨
./run_gpu_visualization.sh vram-all [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ]
```

# åŸ·è¡Œæ‰€æœ‰ç¯„ä¾‹
./run_gpu_visualization.sh examples
```

### ä¸­æ–‡å­—é«”æ”¯æ´

ç³»çµ±æœƒè‡ªå‹•åµæ¸¬ä¸¦é…ç½®æœ€ä½³çš„ä¸­æ–‡å­—é«”ï¼š

- **Ubuntu/Debian**: Noto Sans CJK TC/SC/JP
- **Windows**: Microsoft YaHei
- **macOS**: PingFang SC
- **å‚™ç”¨å­—é«”**: DejaVu Sans, Arial Unicode MS

å¦‚æœé‡åˆ°å­—é«”é¡¯ç¤ºå•é¡Œï¼Œå¯åŸ·è¡Œå­—é«”æ¸¬è©¦ï¼š

```bash
cd visualization
python3 test_fonts.py
```

## ï¿½ æ•¸æ“šæ”¶é›†è…³æœ¬è©³è¿°

### ä¸»è¦è…³æœ¬åŠŸèƒ½

#### 1. `daily_gpu_log.sh` - æ—¥å¸¸æ•¸æ“šæ”¶é›†
- **åŠŸèƒ½**: å¾å¤šå€‹ç¯€é»æ”¶é›† GPU ä½¿ç”¨ç‡å’Œ VRAM ä½¿ç”¨ç‡æ•¸æ“š
- **è¼¸å‡º**: CSV æª”æ¡ˆï¼ˆåŒ…å«æ™‚é–“æˆ³ã€GPUä½¿ç”¨ç‡ã€VRAMä½¿ç”¨ç‡ï¼‰
- **ç¶²è·¯ä¾†æº**: Netdata API (å„ç¯€é»çš„ 19999 ç«¯å£)
- **ç›£æ§é …ç›®**: 
  - AMD GPU ä½¿ç”¨ç‡ (`amdgpu.gpu_utilization`)
  - VRAM ä½¿ç”¨ç‡ (`amdgpu.gpu_mem_vram_usage_perc`)

#### 2. `calculate_gpu_range.sh` - æ—¥æœŸå€é–“åˆ†æ
- **åŠŸèƒ½**: åˆ†ææŒ‡å®šæ—¥æœŸå€é–“å…§çš„ GPU ä½¿ç”¨ç‡çµ±è¨ˆ
- **è¼¸å‡º**: å¹³å‡ä½¿ç”¨ç‡ã€æœ€é«˜/æœ€ä½ä½¿ç”¨ç‡ã€çµ±è¨ˆå ±å‘Š

#### 3. `calculate_node_gpu_usage.sh` - ç¯€é»ä½¿ç”¨ç‡åˆ†æ
- **åŠŸèƒ½**: åˆ†æå„ç¯€é»çš„ GPU å’Œ VRAM å¹³å‡ä½¿ç”¨ç‡
- **ç‰¹è‰²**: 
  - æ”¯æ´ GPU å’Œ VRAM é›™é‡åˆ†æ
  - å¼·åŒ–çš„æ•¸å€¼è™•ç†ï¼ˆé¿å…ç§‘å­¸è¨˜æ•¸æ³•éŒ¯èª¤ï¼‰
  - ä½¿ç”¨ `awk` é€²è¡Œå®‰å…¨çš„æ•¸å­¸é‹ç®—
- **è¼¸å‡º**: 
  - CSV å ±å‘Šæª”æ¡ˆ
  - æ–‡å­—æ‘˜è¦å ±å‘Š
  - å„ç¯€é»çš„è©³ç´°çµ±è¨ˆ

### ğŸ”¥ Python ç‰ˆæœ¬æ•¸æ“šæ”¶é›†å™¨ (`python/daily_gpu_log.py`)

**æ–°å¢åŠŸèƒ½**: åŸºæ–¼åŸ shell è…³æœ¬é–‹ç™¼çš„ Python ç‰ˆæœ¬ï¼Œæä¾›ç›¸åŒåŠŸèƒ½ä½†å…·æœ‰æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œå¯æ“´å±•æ€§ã€‚

**ä¸»è¦å„ªå‹¢:**
- **æ›´å¥½çš„éŒ¯èª¤è™•ç†**: è©³ç´°çš„ç•°å¸¸è³‡è¨Šå’Œç¶²è·¯éŒ¯èª¤æ¢å¾©
- **æ•¸æ“šé©—è­‰**: ä½¿ç”¨ pandas é€²è¡Œå¼·å¤§çš„æ•¸æ“šé©—è­‰å’Œè™•ç†
- **ç‰©ä»¶å°å‘è¨­è¨ˆ**: æ˜“æ–¼ç¶­è­·å’Œæ“´å±•çš„ç¨‹å¼æ¶æ§‹
- **ç©©å®šçš„ç¶²è·¯è«‹æ±‚**: ä½¿ç”¨ requests åº«è™•ç† HTTP è«‹æ±‚

**ç”¨æ³•:**

```bash
# ä½¿ç”¨åŸ·è¡Œè…³æœ¬ï¼ˆæ¨è–¦ï¼‰
./python/run_daily_gpu_log.sh [æ—¥æœŸ]

# ç›´æ¥ä½¿ç”¨ Python è…³æœ¬
python3 python/daily_gpu_log.py [æ—¥æœŸ] [--data-dir è·¯å¾‘]
```

**è¼¸å‡ºæ ¼å¼**: èˆ‡åŸ shell è…³æœ¬å®Œå…¨ç›¸å®¹ï¼ŒåŒ…æ‹¬ç›¸åŒçš„ CSV çµæ§‹å’Œæ‘˜è¦å ±å‘Šã€‚

**è©³ç´°èªªæ˜**: è«‹åƒé–± `python/README.md` å’Œ `python/COMPARISON.md`

### 1. æ•¸æ“šæ”¶é›†èˆ‡å¹³å‡å€¼è¨ˆç®— (`scripts/daily_gpu_log.sh`)

æ­¤è…³æœ¬æœƒå¾å¤šå€‹ç¯€é»æ”¶é›†æ‰€æœ‰ AMD GPU çš„ä½¿ç”¨ç‡æ•¸æ“šï¼Œä¸¦è¨ˆç®—æ¯æ—¥å¹³å‡å€¼ã€‚

**ç”¨æ³•:**

```bash
./scripts/daily_gpu_log.sh [æ—¥æœŸ]
```

**åƒæ•¸:**

- `æ—¥æœŸ`: å¯é¸ï¼ŒæŒ‡å®šè¦æ”¶é›†çš„æ—¥æœŸ (æ ¼å¼: YYYY-MM-DD)ï¼Œå¦‚ä¸æŒ‡å®šå‰‡ä½¿ç”¨ç•¶å¤©æ—¥æœŸ

**è¼¸å‡º:**

- å„ç¯€é»çš„ SVG æ ¼å¼ GPU ä½¿ç”¨ç‡åœ–è¡¨
- å„ç¯€é»çš„ CSV æ ¼å¼ GPU ä½¿ç”¨ç‡æ•¸æ“š
- å„ç¯€é»çš„æ¯æ—¥ GPU å¹³å‡ä½¿ç”¨ç‡æ‘˜è¦

### 2. æ—¥æœŸå€é–“ GPU ä½¿ç”¨ç‡çµ±è¨ˆ (`scripts/calculate_gpu_range.sh`)

æ­¤è…³æœ¬è¨ˆç®—æŒ‡å®šæ—¥æœŸå€é–“å…§ï¼Œå„ GPU çš„å¹³å‡ä½¿ç”¨ç‡ã€‚

**ç”¨æ³•:**

```bash
./scripts/calculate_gpu_range.sh é–‹å§‹æ—¥æœŸ çµæŸæ—¥æœŸ [ç‰¹å®š GPU ID]
```

**åƒæ•¸:**

- `é–‹å§‹æ—¥æœŸ`: åˆ†æçš„èµ·å§‹æ—¥æœŸ (æ ¼å¼: YYYY-MM-DD)
- `çµæŸæ—¥æœŸ`: åˆ†æçš„çµæŸæ—¥æœŸ (æ ¼å¼: YYYY-MM-DD)
- `ç‰¹å®š GPU ID`: å¯é¸ï¼ŒæŒ‡å®šè¦åˆ†æçš„ GPU IDï¼ˆä¾‹å¦‚: 1, 9, 17...ç­‰ï¼‰

**è¼¸å‡º:**

- åŒ…å«æ¯å€‹ GPU å¹³å‡ä½¿ç”¨ç‡çš„æ‘˜è¦å ±è¡¨
- è©³ç´°çš„ CSV æ ¼å¼çµ±è¨ˆæ•¸æ“š

### 3. ç¯€é» GPU ä½¿ç”¨ç‡çµ±è¨ˆ (`scripts/calculate_node_gpu_usage.sh`)

æ­¤è…³æœ¬é‡å°å¤šç¯€é»ç’°å¢ƒï¼Œè¨ˆç®—æŒ‡å®šæ—¥æœŸå€é–“å…§æ¯å€‹ç¯€é»çš„ GPU å¹³å‡ä½¿ç”¨ç‡ã€‚

**ç”¨æ³•:**

```bash
./scripts/calculate_node_gpu_usage.sh é–‹å§‹æ—¥æœŸ çµæŸæ—¥æœŸ [ç¯€é»åç¨±]
```

**åƒæ•¸:**

- `é–‹å§‹æ—¥æœŸ`: åˆ†æçš„èµ·å§‹æ—¥æœŸ (æ ¼å¼: YYYY-MM-DD)
- `çµæŸæ—¥æœŸ`: åˆ†æçš„çµæŸæ—¥æœŸ (æ ¼å¼: YYYY-MM-DD)
- `ç¯€é»åç¨±`: å¯é¸ï¼ŒæŒ‡å®šè¦åˆ†æçš„ç¯€é» (ä¾‹å¦‚: colab-gpu1)

**è¼¸å‡º:**

- å„ç¯€é»çš„å¹³å‡ GPU ä½¿ç”¨ç‡çµ±è¨ˆ
- å„ç¯€é»ä¸­æ¯å€‹ GPU çš„å¹³å‡ä½¿ç”¨ç‡çµ±è¨ˆ
- æ¯æ—¥ä½¿ç”¨ç‡çµ±è¨ˆ
- CSV æ ¼å¼çš„è©³ç´°æ•¸æ“š

### 4. è¼”åŠ©å·¥å…·

#### å­—é«”æ¸¬è©¦å·¥å…· (`visualization/test_fonts.py`)
- **åŠŸèƒ½**: æ¸¬è©¦ç³»çµ±ä¸­å¯ç”¨çš„ä¸­æ–‡å­—é«”
- **ç”¨æ³•**: `cd visualization && python3 test_fonts.py`

#### ç¯„ä¾‹èˆ‡æ•™å­¸ (`visualization/gpu_trend_examples.py`)
- **åŠŸèƒ½**: æä¾›å®Œæ•´çš„ä½¿ç”¨ç¯„ä¾‹å’Œæ•™å­¸
- **ç”¨æ³•**: `cd visualization && python3 gpu_trend_examples.py`

## âš™ï¸ ç³»çµ±éœ€æ±‚èˆ‡å®‰è£

### ğŸ”¥ Python ç‰ˆæœ¬å®‰è£ï¼ˆæ¨è–¦ï¼‰

**ç³»çµ±éœ€æ±‚:**
- Python 3.7+
- requests >= 2.25.0
- pandas >= 1.3.0

**å¿«é€Ÿå®‰è£:**
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd data_collection

# 2. å®‰è£ Python æ•¸æ“šæ”¶é›†å™¨ä¾è³´
pip3 install -r python/requirements.txt

# 3. è¨­å®šåŸ·è¡Œæ¬Šé™
chmod +x python/run_daily_gpu_log.sh

# 4. æ¸¬è©¦ Python ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰
python3 python/test_gpu_collector.py

# 5. ç«‹å³é–‹å§‹ä½¿ç”¨ï¼
./python/run_daily_gpu_log.sh
```

### å®Œæ•´ç³»çµ±å®‰è£

**ä¾è³´é …:**

**ğŸ”¥ Python æ•¸æ“šæ”¶é›†å™¨:**
- Python 3.7+
- requests >= 2.25.0 
- pandas >= 1.3.0

**Shell è…³æœ¬ï¼ˆå‚™ç”¨ï¼‰:**
- `bash`, `curl`, `jq`, `awk`, `bc`

**Python è¦–è¦ºåŒ–:**
- å¥—ä»¶åˆ—è¡¨è«‹åƒè€ƒ `visualization/requirements.txt`

**å®Œæ•´å®‰è£æ­¥é©Ÿ:**
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd data_collection

# 2. ğŸ”¥ å®‰è£ Python æ•¸æ“šæ”¶é›†å™¨
pip3 install -r python/requirements.txt

# 3. å®‰è£è¦–è¦ºåŒ–å·¥å…·ä¾è³´
pip install -r visualization/requirements.txt

# 4. è¨­å®šæ‰€æœ‰åŸ·è¡Œæ¬Šé™
chmod +x run_gpu_visualization.sh
chmod +x python/run_daily_gpu_log.sh
chmod +x scripts/*.sh
chmod +x visualization/run_viz.sh

# 5. æ¸¬è©¦ç³»çµ±
python3 python/test_gpu_collector.py        # æ¸¬è©¦æ•¸æ“šæ”¶é›†å™¨
cd visualization && python3 test_fonts.py   # æ¸¬è©¦å­—é«”é…ç½®
```

## â° å®šæ™‚ä»»å‹™é…ç½®

ç³»çµ±å¯è¨­å®šåœ¨æ¯å¤©æ™šä¸Š 23:45 è‡ªå‹•åŸ·è¡Œæ•¸æ“šæ”¶é›†ï¼š

```bash
# ç·¨è¼¯ crontab
crontab -e

# ğŸ”¥ æ¨è–¦ä½¿ç”¨ Python ç‰ˆæœ¬ï¼ˆæ›´ç©©å®šçš„éŒ¯èª¤è™•ç†ï¼‰
45 23 * * * /bin/bash /path/to/data_collection/python/run_daily_gpu_log.sh

# æˆ–è€…ä½¿ç”¨åŸå§‹ Shell ç‰ˆæœ¬
45 23 * * * /bin/bash /path/to/data_collection/scripts/daily_gpu_log.sh
```

## ğŸ“ ä½¿ç”¨ç¯„ä¾‹

### ğŸ”¥ Python ç‰ˆæœ¬å®Œæ•´ä½¿ç”¨æµç¨‹ï¼ˆæ¨è–¦ï¼‰

**ç¬¬ä¸€æ¬¡ä½¿ç”¨ - ç’°å¢ƒæª¢æŸ¥ï¼š**
```bash
# æª¢æŸ¥æ‰€æœ‰ç’°å¢ƒå’ŒåŠŸèƒ½
python3 python/test_gpu_collector.py

# æª¢æŸ¥ç‰¹å®šåŠŸèƒ½
python3 -c "
import sys
sys.path.append('python')
from daily_gpu_log import GPUDataCollector
collector = GPUDataCollector()
print('Python ç‰ˆæœ¬æº–å‚™å°±ç·’ï¼')
print(f'ç›£æ§ç¯€é»: {list(collector.ip_name_map.values())}')
print(f'GPU IDs: {collector.gpu_ids}')
"
```

**æ—¥å¸¸ä½¿ç”¨ï¼š**
```bash
# æ”¶é›†ä»Šå¤©çš„æ•¸æ“šï¼ˆæœ€å¸¸ç”¨ï¼‰
./python/run_daily_gpu_log.sh

# æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
./python/run_daily_gpu_log.sh 2025-08-01

# ä½¿ç”¨è‡ªè¨‚æ•¸æ“šç›®éŒ„
python3 python/daily_gpu_log.py --data-dir /custom/path

# æª¢æŸ¥èªªæ˜å’Œæ‰€æœ‰é¸é …
./python/run_daily_gpu_log.sh --help
```

**é€²éšä½¿ç”¨ï¼š**
```bash
# ç›´æ¥ä½¿ç”¨ Python API
python3 -c "
import sys
sys.path.append('python')
from daily_gpu_log import GPUDataCollector

collector = GPUDataCollector()
collector.collect_data('2025-08-01')  # æ”¶é›†æŒ‡å®šæ—¥æœŸ
print('æ•¸æ“šæ”¶é›†å®Œæˆï¼')
"
```

### å‚³çµ± Shell ç‰ˆæœ¬ï¼ˆå‚™ç”¨ï¼‰

```bash
# æ”¶é›†ä»Šå¤©çš„ GPU ä½¿ç”¨ç‡æ•¸æ“š
./scripts/daily_gpu_log.sh

# æ”¶é›†æŒ‡å®šæ—¥æœŸçš„æ•¸æ“š
./scripts/daily_gpu_log.sh 2025-08-01
```

### ğŸ”„ ç‰ˆæœ¬æ¯”è¼ƒå’Œåˆ‡æ›

```bash
# åŒæ™‚ä½¿ç”¨å…©å€‹ç‰ˆæœ¬é€²è¡Œæ¯”è¼ƒ
./scripts/daily_gpu_log.sh 2025-08-01    # Shell ç‰ˆæœ¬
./python/run_daily_gpu_log.sh 2025-08-01 # Python ç‰ˆæœ¬

# æ¯”è¼ƒè¼¸å‡ºæª”æ¡ˆï¼ˆæ‡‰è©²å®Œå…¨ç›¸åŒï¼‰
diff data/colab-gpu1/2025-08-01/average_2025-08-01.csv
```

### çµ±è¨ˆç‰¹å®šæ—¥æœŸç¯„åœçš„ç¯€é»ä½¿ç”¨ç‡

```bash
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15
```

### åˆ†æç‰¹å®šç¯€é»çš„ GPU ä½¿ç”¨ç‡

```bash
./scripts/calculate_node_gpu_usage.sh 2025-05-01 2025-05-15 colab-gpu1
```

### æŸ¥çœ‹ç‰¹å®š GPU çš„ä½¿ç”¨ç‡çµ±è¨ˆ

```bash
./scripts/calculate_gpu_range.sh 2025-05-01 2025-05-15 1
```

### ç”Ÿæˆè¦–è¦ºåŒ–åœ–è¡¨

```bash
# å¿«é€Ÿç”Ÿæˆæ‰€æœ‰å¸¸ç”¨åœ–è¡¨
./run_gpu_visualization.sh quick 2025-05-23 2025-05-26

# ç”Ÿæˆç‰¹å®šé¡å‹åœ–è¡¨
./run_gpu_visualization.sh heatmap 2025-05-23 2025-05-26
./run_gpu_visualization.sh nodes 2025-05-23 2025-05-26
```

### å°‡æ—¥æœŸæ™‚é–“è½‰æ›ç‚ºæ™‚é–“æˆ³è¨˜

```bash
./scripts/test/time_convert.sh date2ts "2025-05-27 00:00:00" Asia/Taipei
```

## ï¿½ Shell vs Python ç‰ˆæœ¬åŠŸèƒ½æ¯”è¼ƒ

| åŠŸèƒ½ç‰¹æ€§ | Shell ç‰ˆæœ¬ | ğŸ”¥ Python ç‰ˆæœ¬ | å„ªå‹¢èªªæ˜ |
|----------|------------|-----------------|----------|
| **åŸºæœ¬æ•¸æ“šæ”¶é›†** | âœ… | âœ… | å®Œå…¨ç›¸åŒçš„åŠŸèƒ½ |
| **è¼¸å‡ºæ ¼å¼** | âœ… | âœ… | 100% ç›¸å®¹ |
| **ğŸ”¥ GPU ä½¿ç”¨è€…è¿½è¹¤** | âŒ | âœ… | æ•´åˆç®¡ç† API |
| **ç¡¬é«”å°æ‡‰è¡¨** | âŒ | âœ… | Card ID åˆ° GPU Index |
| **ä½¿ç”¨è€…æ¬„ä½å ±è¡¨** | âŒ | âœ… | CSV å’Œæ‘˜è¦åŒ…å«ä½¿ç”¨è€… |
| **åŸ·è¡Œé€Ÿåº¦** | âš¡ å¿«é€Ÿ | ğŸŸ¡ ç¨æ…¢ | å·®ç•°å¾®å°ï¼ˆ~5ç§’ï¼‰ |
| **éŒ¯èª¤è™•ç†** | ğŸŸ¡ åŸºæœ¬ | ğŸ”¥ é€²éš | è©³ç´°éŒ¯èª¤è¨ºæ–· |
| **ç¶²è·¯ç©©å®šæ€§** | ğŸŸ¡ ä¾è³´curl | ğŸ”¥ æ™ºæ…§é‡è©¦ | è‡ªå‹•éŒ¯èª¤æ¢å¾© |
| **æ•¸æ“šé©—è­‰** | âš ï¸ æœ‰é™ | ğŸ”¥ å¼·å¤§ | pandas æ•¸æ“šæª¢æŸ¥ |
| **ç¨‹å¼ç¢¼å“è³ª** | ğŸŸ¡ ä¸­ç­‰ | ğŸ”¥ å„ªç§€ | ç‰©ä»¶å°å‘è¨­è¨ˆ |
| **ç¶­è­·æ€§** | ğŸŸ¡ ä¸­ç­‰ | ğŸ”¥ å„ªç§€ | æ¨¡çµ„åŒ–æ¶æ§‹ |
| **å¯æ“´å±•æ€§** | âš ï¸ æœ‰é™ | ğŸ”¥ å„ªç§€ | æ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½ |
| **æ¸¬è©¦ç³»çµ±** | âŒ ç„¡ | âœ… å®Œæ•´ | è‡ªå‹•åŒ–æ¸¬è©¦ |
| **æ–‡æª”å®Œæ•´æ€§** | ğŸŸ¡ åŸºæœ¬ | ğŸ”¥ è©³ç´° | å®Œæ•´çš„APIæ–‡æª” |

### ğŸš€ ä½•æ™‚ä½¿ç”¨å“ªå€‹ç‰ˆæœ¬ï¼Ÿ

**ç«‹å³ä½¿ç”¨ Python ç‰ˆæœ¬ï¼Œå¦‚æœä½ ï¼š**
- ğŸ¯ éœ€è¦æ›´å¯é çš„æ•¸æ“šæ”¶é›†
- ï¿½ æƒ³è¦ GPU ä½¿ç”¨è€…è¿½è¹¤åŠŸèƒ½
- ğŸ“Š éœ€è¦è©³ç´°çš„ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š
- ğŸ—ƒï¸ å¸Œæœ›çœ‹åˆ° GPU ç¡¬é«”å°æ‡‰è¡¨
- ï¿½ğŸ› ï¸ è¨ˆåŠƒæ·»åŠ æ–°åŠŸèƒ½æˆ–è‡ªå®šç¾©
- ğŸ“Š é‡è¦–æ•¸æ“šå®Œæ•´æ€§å’Œé©—è­‰
- ğŸ”§ ç†Ÿæ‚‰ Python é–‹ç™¼

**ä¿ç•™ Shell ç‰ˆæœ¬ï¼Œå¦‚æœä½ ï¼š**
- âš¡ è¿½æ±‚æœ€å¿«çš„åŸ·è¡Œé€Ÿåº¦
- ğŸ’¾ é‹è¡Œåœ¨è³‡æºæ¥µå…¶æœ‰é™çš„ç’°å¢ƒ
- ğŸ”’ ç¾æœ‰ç³»çµ±å·²ç©©å®šé‹è¡Œ
- ğŸ“¦ å¸Œæœ›æœ€å°‘çš„ç³»çµ±ä¾è³´
- âŒ ä¸éœ€è¦ä½¿ç”¨è€…è¿½è¹¤åŠŸèƒ½

**æ¨è–¦ç­–ç•¥ï¼š**
1. **æ–°ç”¨æˆ¶** â†’ ç›´æ¥ä½¿ç”¨ Python ç‰ˆæœ¬ï¼ˆåŒ…å«å®Œæ•´åŠŸèƒ½ï¼‰
2. **ç¾æœ‰ç”¨æˆ¶** â†’ ä¸¦è¡Œæ¸¬è©¦å¾Œé€æ­¥é·ç§»
3. **ç”Ÿç”¢ç’°å¢ƒ** â†’ å…ˆæ¸¬è©¦ Python ç‰ˆæœ¬ï¼Œç¢ºèªç©©å®šå¾Œåˆ‡æ›
4. **éœ€è¦ä½¿ç”¨è€…è¿½è¹¤** â†’ å¿…é ˆä½¿ç”¨ Python ç‰ˆæœ¬

## ï¿½ğŸ¯ é€²éšåŠŸèƒ½

### ç›´æ¥ä½¿ç”¨ Python è¦–è¦ºåŒ–å·¥å…·

```bash
cd visualization

# ä½¿ç”¨å¿«é€Ÿç¹ªåœ–å·¥å…·
python3 quick_gpu_trend_plots.py

# ä½¿ç”¨é€²éšåˆ†æå™¨
python3 advanced_gpu_trend_analyzer.py --start-date 2025-05-23 --end-date 2025-05-26 --mode all

# åŸ·è¡Œæ‰€æœ‰ç¯„ä¾‹
python3 gpu_trend_examples.py
```

### è‡ªè¨‚è¦–è¦ºåŒ–è…³æœ¬

å¯ä»¥åŸºæ–¼ `visualization/` ç›®éŒ„ä¸­çš„æ¨¡çµ„å‰µå»ºè‡ªè¨‚çš„è¦–è¦ºåŒ–è…³æœ¬ã€‚è©³ç´°èªªæ˜è«‹åƒè€ƒï¼š

- `visualization/README.md` - è¦–è¦ºåŒ–å·¥å…·èªªæ˜
- `visualization/GPU_TREND_VISUALIZATION_GUIDE.md` - è©³ç´°ä½¿ç”¨æŒ‡å—
- `VISUALIZATION_QUICK_START.md` - å¿«é€ŸæŒ‡å—

## âš ï¸ æ³¨æ„äº‹é …

- é€™äº›è…³æœ¬ä¾è³´æ–¼ Netdata ç›£æ§ç³»çµ±ä¾†æ”¶é›† GPU ä½¿ç”¨ç‡æ•¸æ“š
- ç¢ºä¿å„ç¯€é»çš„ Netdata æœå‹™æ­£å¸¸é‹è¡Œä¸¦å¯é€éç¶²è·¯å­˜å–
- è‹¥è¦èª¿æ•´ GPU çš„æ¡æ¨£é »ç‡ï¼Œå¯ä¿®æ”¹ `daily_gpu_log.sh` ä¸­çš„ `POINTS` è®Šæ•¸
- æ•¸æ“šç›®éŒ„ `data/` å·²åŠ å…¥ `.gitignore`ï¼Œä¸æœƒè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- åœ–è¡¨è¼¸å‡ºç›®éŒ„ç‚º `plots/`ï¼Œå»ºè­°å®šæœŸæ¸…ç†èˆŠåœ–è¡¨

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. æ•¸æ“šæ”¶é›†å•é¡Œ
- **éŒ¯èª¤**: `(standard_in) 1: syntax error`
  - **åŸå› **: æ•¸æ“šä¸­åŒ…å«ç§‘å­¸è¨˜æ•¸æ³•æˆ–ç„¡æ•ˆæ•¸å€¼
  - **è§£æ±º**: å·²åœ¨ `calculate_node_gpu_usage.sh` ä¸­ä½¿ç”¨ `awk` æ›¿ä»£ `bc` é€²è¡Œæ•¸å€¼è™•ç†

- **éŒ¯èª¤**: `bad array subscript`
  - **åŸå› **: é™£åˆ—ç´¢å¼•æœªæ­£ç¢ºå®šç¾©
  - **è§£æ±º**: å·²ä¿®æ­£è®Šæ•¸åˆå§‹åŒ–é †åº

#### 2. è¦–è¦ºåŒ–å•é¡Œ
- **ä¸­æ–‡å­—é«”é¡¯ç¤ºç‚ºæ–¹å¡Š**
  - **è§£æ±º**: åŸ·è¡Œ `cd visualization && python3 test_fonts.py` æª¢æŸ¥å­—é«”é…ç½®

- **åœ–è¡¨ç”Ÿæˆå¤±æ•—**
  - **æª¢æŸ¥**: ç¢ºèª Python ä¾è³´å·²æ­£ç¢ºå®‰è£
  - **æª¢æŸ¥**: ç¢ºèªæ•¸æ“šç›®éŒ„çµæ§‹æ­£ç¢º

#### 3. ç¶²è·¯é€£ç·šå•é¡Œ
- **ç„¡æ³•æ”¶é›†æ•¸æ“š**
  - **æª¢æŸ¥**: å„ç¯€é» Netdata æœå‹™ (ç«¯å£ 19999) æ˜¯å¦æ­£å¸¸é‹è¡Œ
  - **æª¢æŸ¥**: ç¶²è·¯é€£ç·šæ˜¯å¦æš¢é€š

### æ—¥èªŒèˆ‡åµéŒ¯

æ•¸æ“šæ”¶é›†éç¨‹ä¸­çš„è©³ç´°è³‡è¨Šæœƒé¡¯ç¤ºåœ¨çµ‚ç«¯æ©Ÿä¸­ï¼ŒåŒ…æ‹¬ï¼š
- è™•ç†çš„ç¯€é»å’Œæ—¥æœŸ
- æ‰¾åˆ°çš„ CSV æª”æ¡ˆ
- è¨ˆç®—çš„å¹³å‡å€¼
- ä»»ä½•è­¦å‘Šæˆ–éŒ¯èª¤è¨Šæ¯

## ğŸ“Š æ•¸æ“šæ ¼å¼èªªæ˜

### CSV æª”æ¡ˆçµæ§‹

æ¯å€‹ GPU çš„ CSV æª”æ¡ˆåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š
```csv
æ™‚é–“æˆ³,æ—¥æœŸæ™‚é–“,GPUä½¿ç”¨ç‡(%),VRAMä½¿ç”¨ç‡(%)
1716969600,"2025-05-28 00:00:00",1.23,45.67
```

**ğŸ”¥ å¹³å‡å€¼ CSV æª”æ¡ˆçµæ§‹ (åŒ…å«ä½¿ç”¨è€…è³‡è¨Š):**
```csv
GPUç·¨è™Ÿ,å¹³å‡GPUä½¿ç”¨ç‡(%),å¹³å‡VRAMä½¿ç”¨ç‡(%),ä½¿ç”¨è€…
GPU[0],0.00,0.14,æœªä½¿ç”¨
GPU[1],0.00,0.14,æœªä½¿ç”¨
GPU[2],20.28,83.38,æœªä½¿ç”¨
GPU[3],18.17,82.27,nycubme
GPU[4],0.00,0.14,æœªä½¿ç”¨
GPU[5],0.00,0.14,æœªä½¿ç”¨
GPU[6],0.00,0.14,æœªä½¿ç”¨
GPU[7],0.00,0.14,æœªä½¿ç”¨
å…¨éƒ¨å¹³å‡,4.81,20.81,æ‰€æœ‰ä½¿ç”¨è€…
```

### å ±å‘Šæª”æ¡ˆçµæ§‹

ç¯€é»åˆ†æå ±å‘ŠåŒ…å«ï¼š
- **GPU ç¡¬é«”å°æ‡‰è¡¨** - Card ID åˆ° GPU Index çš„å°æ‡‰é—œä¿‚
- **ğŸ”¥ GPU ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š** - è©³ç´°çš„ä½¿ç”¨è€…ä»»å‹™è³‡è¨Šï¼ŒåŒ…å«ï¼š
  - ä½¿ç”¨è€…åç¨±å’Œ GPU UUID
  - GPU å‹è™Ÿå’Œè¨˜æ†¶é«”å®¹é‡
  - ä»»å‹™é¡å‹ï¼ˆLABã€WEBAPP ç­‰ï¼‰
  - å°ˆæ¡ˆ UUID å’Œæ˜ åƒæª”è³‡è¨Š
  - ä»»å‹™é–‹å§‹æ™‚é–“å’ŒåŸ·è¡Œæ™‚é•·
- **å„ç¯€é»çš„å¹³å‡ GPU ä½¿ç”¨ç‡** - åŒ…å«ä½¿ç”¨è€…è³‡è¨Š
- **å„ç¯€é»çš„å¹³å‡ VRAM ä½¿ç”¨ç‡** - å€åˆ†ä½¿ç”¨ä¸­å’Œæœªä½¿ç”¨
- **æ¯å€‹ GPU çš„è©³ç´°çµ±è¨ˆ** - é¡¯ç¤ºå°æ‡‰çš„ä½¿ç”¨è€…
- **æ¯æ—¥ä½¿ç”¨ç‡è®ŠåŒ–è¶¨å‹¢**

**ç¯„ä¾‹æ‘˜è¦å ±å‘Šæ ¼å¼:**
```
GPU ç¡¬é«”å°æ‡‰è¡¨:
GPU[0] -> Card 1
GPU[1] -> Card 9
...

GPU ä½¿ç”¨è€…ä»»å‹™è³‡è¨Š:
--------------------------------------------------
colab-gpu4 GPU ä»»å‹™è³‡è¨Š:
  GPU 25: nycubme
    - GPU å‹è™Ÿ: AMD Instinct MI300X
    - GPU è¨˜æ†¶é«”: 196592 MB
    - ä»»å‹™é¡å‹: LAB
    - å°ˆæ¡ˆ UUID: pd6ce655
    - æ˜ åƒæª”: myelintek/labu1f682d9:1750235191
    - é–‹å§‹æ™‚é–“: Mon, 14 Jul 2025 14:22:00 GMT
    - ç‹€æ…‹: åŸ·è¡Œä¸­
    - ä½¿ç”¨æ™‚é•·: 86399.0 ç§’
    - GPU UUID: APU-70cb99ce3e214bda

å„ GPU ä½¿ç”¨ç‡èˆ‡ VRAM ä½¿ç”¨ç‡:
GPU[0]: GPUä½¿ç”¨ç‡ = 0.0%, VRAMä½¿ç”¨ç‡ = 0.14% (ä½¿ç”¨è€…: æœªä½¿ç”¨)
GPU[3]: GPUä½¿ç”¨ç‡ = 18.17%, VRAMä½¿ç”¨ç‡ = 82.27% (ä½¿ç”¨è€…: nycubme)
...
```

## ğŸš€ Python ç‰ˆæœ¬æœªä¾†ç™¼å±•è¨ˆåŠƒ

åŸºæ–¼æ–°çš„ Python ç‰ˆæœ¬æ¶æ§‹ï¼Œæˆ‘å€‘è¨ˆåŠƒé–‹ç™¼ä»¥ä¸‹é€²éšåŠŸèƒ½ï¼š

### ç¬¬ä¸€éšæ®µ (å·²å®Œæˆ âœ…)
- [x] **å®Œæ•´åŠŸèƒ½å°ç­‰** - èˆ‡ Shell ç‰ˆæœ¬å®Œå…¨ç›¸å®¹
- [x] **æ™ºæ…§éŒ¯èª¤è™•ç†** - è©³ç´°çš„ç•°å¸¸è¨ºæ–·å’Œè‡ªå‹•æ¢å¾©
- [x] **æ•¸æ“šé©—è­‰ç³»çµ±** - ä½¿ç”¨ pandas é€²è¡Œæ•¸æ“šå®Œæ•´æ€§æª¢æŸ¥
- [x] **æ¸¬è©¦è‡ªå‹•åŒ–** - å®Œæ•´çš„æ¸¬è©¦è¦†è“‹å’Œç’°å¢ƒé©—è­‰

### ç¬¬äºŒéšæ®µ (è¨ˆåŠƒä¸­ ğŸ—“ï¸)
- [ ] **ä¸¦è¡Œè™•ç†** - åŒæ™‚å¾å¤šå€‹ç¯€é»æ”¶é›†æ•¸æ“šï¼Œæå‡æ•ˆç‡
- [ ] **é…ç½®æª”æ¡ˆæ”¯æ´** - å¤–éƒ¨ YAML/JSON é…ç½®ï¼Œç„¡éœ€ä¿®æ”¹ç¨‹å¼ç¢¼
- [ ] **è³‡æ–™åº«æ•´åˆ** - ç›´æ¥å„²å­˜åˆ° SQLite/PostgreSQL
- [ ] **å³æ™‚ç›£æ§æ¨¡å¼** - æŒçºŒç›£æ§è€Œéå®šæ™‚æ”¶é›†

### ç¬¬ä¸‰éšæ®µ (æœªä¾†è¨ˆåŠƒ ğŸ”®)
- [ ] **Web ç®¡ç†ä»‹é¢** - åŸºæ–¼ Flask/FastAPI çš„ Web GUI
- [ ] **å‘Šè­¦ç³»çµ±** - Email/Slack é€šçŸ¥ç•°å¸¸æƒ…æ³
- [ ] **REST API** - æä¾›æ¨™æº– API ä»‹é¢
- [ ] **å®¹å™¨åŒ–éƒ¨ç½²** - Docker æ”¯æ´å’Œ Kubernetes æ•´åˆ

### ç¨‹å¼ç¢¼ç¯„ä¾‹é è¦½

**ä¸¦è¡Œè™•ç†ï¼ˆè¨ˆåŠƒä¸­ï¼‰ï¼š**
```python
import concurrent.futures

with concurrent.futures.ThreadPoolExecutor(max_workers=4) as executor:
    futures = [executor.submit(self.process_gpu_data, ip, name, date) 
               for ip, name in self.ip_name_map.items()]
    results = [future.result() for future in futures]
```

**é…ç½®æª”æ¡ˆæ”¯æ´ï¼ˆè¨ˆåŠƒä¸­ï¼‰ï¼š**
```yaml
# config.yaml
nodes:
  colab-gpu1: "192.168.10.103"
  colab-gpu2: "192.168.10.104"
  
gpu_ids: [1, 9, 17, 25, 33, 41, 49, 57]
collection_interval: 600  # 10 minutes
output_formats: ["csv", "json", "parquet"]
```

**å³æ™‚ç›£æ§ï¼ˆè¨ˆåŠƒä¸­ï¼‰ï¼š**
```python
# å³æ™‚ç›£æ§æ¨¡å¼
python3 python/daily_gpu_log.py --realtime --interval 60
```

**Web ä»‹é¢ï¼ˆæœªä¾†ï¼‰ï¼š**
```python
# å•Ÿå‹• Web ä»‹é¢
python3 python/web_interface.py
# å­˜å– http://localhost:8080 æŸ¥çœ‹å³æ™‚ç‹€æ…‹
```

### ğŸ¤ åƒèˆ‡é–‹ç™¼

æœ‰èˆˆè¶£åƒèˆ‡ Python ç‰ˆæœ¬é–‹ç™¼ï¼Ÿæ­¡è¿ï¼š

1. **åŠŸèƒ½å»ºè­°** - åœ¨ Issues ä¸­æå‡ºæ–°åŠŸèƒ½æƒ³æ³•
2. **ç¨‹å¼ç¢¼è²¢ç»** - å¯¦ç¾ä¸Šè¿°è¨ˆåŠƒä¸­çš„åŠŸèƒ½
3. **æ¸¬è©¦å›é¥‹** - å›å ±ä½¿ç”¨å•é¡Œå’Œæ”¹é€²å»ºè­°
4. **æ–‡æª”å®Œå–„** - æ”¹é€²ä½¿ç”¨èªªæ˜å’ŒAPIæ–‡æª”

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹å–„é€™å€‹å°ˆæ¡ˆã€‚

### é–‹ç™¼ç’°å¢ƒè¨­ç½®

#### ğŸ”¥ Python ç‰ˆæœ¬é–‹ç™¼ç’°å¢ƒ

```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd data_collection

# 2. å‰µå»ºé–‹ç™¼åˆ†æ”¯
git checkout -b feature/your-feature-name

# 3. è¨­ç½® Python é–‹ç™¼ç’°å¢ƒ
python3 -m venv dev_venv
source dev_venv/bin/activate

# 4. å®‰è£æ‰€æœ‰ä¾è³´
pip install -r python/requirements.txt        # Python æ•¸æ“šæ”¶é›†å™¨
pip install -r visualization/requirements.txt # è¦–è¦ºåŒ–å·¥å…·

# 5. åŸ·è¡Œå®Œæ•´æ¸¬è©¦
python3 python/test_gpu_collector.py

# 6. é–‹ç™¼å’Œæ¸¬è©¦æ–°åŠŸèƒ½
# ... æ‚¨çš„é–‹ç™¼å·¥ä½œ ...

# 7. æäº¤æ›´æ”¹
git add .
git commit -m "Add: æè¿°æ‚¨çš„æ›´æ”¹"
git push origin feature/your-feature-name
```

#### å‚³çµ±é–‹ç™¼ç’°å¢ƒ

```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd data_collection

# 2. å‰µå»ºé–‹ç™¼åˆ†æ”¯
git checkout -b feature/your-feature-name

# 3. å®‰è£å‚³çµ±ä¾è³´
pip install -r visualization/requirements.txt

# 4. é€²è¡Œé–‹ç™¼å’Œæ¸¬è©¦
# ... æ‚¨çš„é–‹ç™¼å·¥ä½œ ...

# 5. æäº¤æ›´æ”¹
git add .
git commit -m "æè¿°æ‚¨çš„æ›´æ”¹"
git push origin feature/your-feature-name
```

#### Python ç‰ˆæœ¬é–‹ç™¼æŒ‡å—

**ç¨‹å¼ç¢¼é¢¨æ ¼ï¼š**
- éµå¾ª PEP 8 æ¨™æº–
- ä½¿ç”¨å‹åˆ¥æç¤ºï¼ˆType Hintsï¼‰
- å®Œæ•´çš„ docstring æ–‡æª”

**æ¸¬è©¦è¦æ±‚ï¼š**
- æ–°åŠŸèƒ½å¿…é ˆåŒ…å«æ¸¬è©¦
- é‹è¡Œ `python3 python/test_gpu_collector.py` ç¢ºä¿é€šé
- æ¸¬è©¦èˆ‡ç¾æœ‰ Shell ç‰ˆæœ¬çš„ç›¸å®¹æ€§

**ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š**
```python
def new_feature(self, param: str) -> bool:
    """
    æ–°åŠŸèƒ½çš„ç°¡çŸ­æè¿°
    
    Args:
        param (str): åƒæ•¸èªªæ˜
        
    Returns:
        bool: å›å‚³å€¼èªªæ˜
        
    Raises:
        ValueError: ç•°å¸¸æƒ…æ³èªªæ˜
    """
    try:
        # å¯¦ç¾é‚è¼¯
        return True
    except Exception as e:
        print(f"éŒ¯èª¤: {e}")
        return False
```

## ğŸ“„ æˆæ¬Šå”è­°

æœ¬å°ˆæ¡ˆæ¡ç”¨ WTFPL (Do What The F*ck You Want To Public License) æˆæ¬Šã€‚

è©³ç´°æ¢æ¬¾è«‹åƒé–± [LICENSE](LICENSE) æª”æ¡ˆã€‚

### ğŸ”§ æ•…éšœæ’é™¤

#### ğŸ”¥ Python ç‰ˆæœ¬å¸¸è¦‹å•é¡Œ

**1. ç’°å¢ƒæª¢æŸ¥å¤±æ•—**
```bash
# å•é¡Œï¼špython3 python/test_gpu_collector.py å¤±æ•—
# è§£æ±ºï¼š
pip3 install -r python/requirements.txt
python3 --version  # ç¢ºèªç‰ˆæœ¬ >= 3.7
```

**2. æ¨¡çµ„åŒ¯å…¥éŒ¯èª¤**
```bash
# å•é¡Œï¼šModuleNotFoundError: No module named 'pandas'
# è§£æ±ºï¼š
pip3 install pandas requests
# æˆ–è€…ä½¿ç”¨è™›æ“¬ç’°å¢ƒï¼š
python3 -m venv .venv && source .venv/bin/activate && pip install -r python/requirements.txt
```

**3. ä½¿ç”¨è€…è¿½è¹¤åŠŸèƒ½å•é¡Œ**
```bash
# å•é¡Œï¼šCSV æª”æ¡ˆä¸­ä½¿ç”¨è€…æ¬„ä½é¡¯ç¤ºç‚ºç©ºæˆ–éŒ¯èª¤
# è§£æ±ºï¼š
# 1. æª¢æŸ¥ç®¡ç† API é€£ç·š
curl -H "Authorization: Bearer YOUR_TOKEN" http://192.168.10.100/api/v2/consumption/task

# 2. æ¸¬è©¦ä½¿ç”¨è€…æ¬„ä½åŠŸèƒ½
python3 test_user_column.py

# 3. æª¢æŸ¥ Bearer Token è¨­å®š
# ç¢ºèª daily_gpu_log.py ä¸­çš„ JWT token æ˜¯å¦æ­£ç¢º
```

**4. GPU ç¡¬é«”å°æ‡‰è¡¨å•é¡Œ**
```bash
# å•é¡Œï¼šGPU Index å°æ‡‰éŒ¯èª¤
# è§£æ±ºï¼š
# æª¢æŸ¥æ‘˜è¦å ±å‘Šä¸­çš„ç¡¬é«”å°æ‡‰è¡¨
cat data/colab-gpu4/$(date +%Y-%m-%d)/summary_$(date +%Y-%m-%d).txt | grep "GPU\["

# ç¢ºèªå°æ‡‰é—œä¿‚ï¼šGPU[0] -> Card 1, GPU[1] -> Card 9, ç­‰ç­‰
```

**5. ç¶²è·¯é€£ç·šå•é¡Œ**
```bash
# å•é¡Œï¼šéŒ¯èª¤ï¼šç„¡æ³•å¾ http://192.168.10.103:19999 ç²å–æ•¸æ“š
# è§£æ±ºï¼š
ping 192.168.10.103  # æª¢æŸ¥ç¶²è·¯é€£ç·š
curl http://192.168.10.103:19999/api/v1/info  # æª¢æŸ¥ Netdata API

# å•é¡Œï¼šç®¡ç† API é€£ç·šå¤±æ•—
# è§£æ±ºï¼š
ping 192.168.10.100  # æª¢æŸ¥ç®¡ç†ä¼ºæœå™¨é€£ç·š
curl http://192.168.10.100/api/v2/consumption/task  # æª¢æŸ¥ç®¡ç† API
```

**6. æ¬Šé™å•é¡Œ**
```bash
# å•é¡Œï¼šPermission denied: ./python/run_daily_gpu_log.sh
# è§£æ±ºï¼š
chmod +x python/run_daily_gpu_log.sh
```

**7. æ•¸æ“šæ ¼å¼å•é¡Œ**
```bash
# å•é¡Œï¼špandas ç„¡æ³•è®€å– CSV æª”æ¡ˆ
# è§£æ±ºï¼šæª¢æŸ¥ç”Ÿæˆçš„ CSV æª”æ¡ˆæ ¼å¼
head -5 data/colab-gpu1/2025-08-01/gpu1_2025-08-01.csv

# ç¢ºèªå¹³å‡å€¼ CSV åŒ…å«ä½¿ç”¨è€…æ¬„ä½
head -5 data/colab-gpu1/2025-08-01/average_2025-08-01.csv
# æ‡‰è©²åŒ…å«ï¼šGPUç·¨è™Ÿ,å¹³å‡GPUä½¿ç”¨ç‡(%),å¹³å‡VRAMä½¿ç”¨ç‡(%),ä½¿ç”¨è€…
```

#### å‚³çµ± Shell ç‰ˆæœ¬å•é¡Œ

### å­—é«”é¡¯ç¤ºå•é¡Œ

å¦‚æœåœ–è¡¨ä¸­çš„ä¸­æ–‡æ–‡å­—é¡¯ç¤ºç‚ºæ–¹å¡Šæˆ–äº‚ç¢¼ï¼š

```bash
cd visualization
python3 test_fonts.py
```

### æ•¸æ“šæ”¶é›†å•é¡Œ

1. æª¢æŸ¥ Netdata æœå‹™ç‹€æ…‹
2. é©—è­‰ç¯€é»ç¶²è·¯é€£æ¥
3. æª¢æŸ¥è…³æœ¬åŸ·è¡Œæ¬Šé™

### Python ä¾è³´å•é¡Œ

```bash
# é‡æ–°å®‰è£ä¾è³´
pip install -r visualization/requirements.txt

# æª¢æŸ¥ Python ç‰ˆæœ¬
python3 --version
```

## ğŸ“„ License

<a href="http://www.wtfpl.net/"><img
       src="https://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-1.png"
       width="88" height="31" alt="WTFPL" /></a>

This project uses the WTFPL license (Do What The Fuck You Want To Public License)
